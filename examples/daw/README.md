# ステップシーケンサー 操作方法（操作手順中心版）

## 1. できること

このシーケンサーでは次を操作できます。

- 4/4ベースのタイムライン編集（全64小節）
- 複数トラックのクリップ選択
- ピアノロールでノート打ち込み/削除
- ノート長の量子化（クオンタイズ）と倍率設定
- BPM変更、再生/停止
- トラックごとの音色（GM）・ベロシティ変更
- 楽器選択モーダル（プログラム送り/検索）

---

## 2. 画面の見方

- **上段：タイムライン**
    - クリップの並び、再生位置（赤線）

- **中央：ピアノロール**
    - ノート編集エリア（青バーがノート）

- **右上：BPM/再生パネル**
    - BPM表示、スライダー、±、再生/停止

- **右中央：Lengthパネル**
    - Quantize（分解能）と Multiplier（長さ倍率）

- **右下：Trackパネル**
    - Instrument / Velocity 設定

- **右下最下部：Zoom/Trackパネル**
    - ロール縦ズーム、選択トラック移動

- **モーダル：Instrument Select**
    - 音色を一覧から選択・検索

---

## 3. 最短スタート（30秒）

1. **タイムライン上**をクリックして、編集したいトラック/小節を選ぶ
2. **Lengthパネル**で `Q`（刻み）と `MUL`（長さ）を設定
3. **ピアノロール**をクリックしてノートを配置
4. 右上の**再生ボタン**で再生
5. 必要に応じて**BPM**と**Instrument/Velocity**を調整

---

## 4. 各エリアの操作

## A. 再生とBPM（右上）

### 再生/停止

- **PLAYボタン**をクリック
- 再生中はアイコンが停止表示（縦2本）になります

### BPM変更

- **スライダーをドラッグ**
- **- / + ボタン**で1ずつ増減
- 範囲は **40〜260 BPM**

---

## B. タイムライン（上段）

### 再生位置ジャンプ

- タイムライン任意位置をクリックすると、再生ヘッドがその拍へ移動

### クリップ選択

- クリックした位置の**トラック×イベント（クリップ）**が選択される
- 選択クリップは強調表示

### 横スクロール

- タイムライン下のスクロールバーをドラッグ

---

## C. ピアノロール（中央）

### ノートの追加

- グリッド上をクリック
- クリック位置は現在の**Quantize**設定にスナップ

### ノートの削除/長さ変更

- 既存ノート上をクリックすると、そのノートを対象にトグル動作
    - 同じ長さ設定で再クリック：削除
    - 異なる長さ設定でクリック：長さ変更

### 音域スクロール

- 右側の縦スクロールバーをドラッグ
- もしくは **↑ / ↓ キー**で上下移動

---

## D. Lengthパネル（右中央）

### Quantize（Q）

- 上段の `- / +` で刻みを変更
- 例：1/16、3連系、5連系など

### Multiplier（MUL）

- 下段の `- / +` で長さ倍率を変更（1〜8）

### 反映される内容

- 実際のノート長 = `Quantize × Multiplier`
- ただしクリップ終端を超える長さにはならないよう自動調整

---

## E. Trackパネル（右下）

### Instrument

- `- / +` でプログラム番号を直接増減
- 中央の数値エリアをクリックで**Instrument Selectモーダル**を開く

### Velocity

- `- / +` で5ずつ増減（0〜127）

---

## F. Zoom/Track（右下最下部）

### Zoom

- `- / +` でピアノロール1行の高さを変更（見やすさ調整）

### Track移動

- 下段 `- / +` で選択トラックを移動
- 既存トラック数を超えて移動すると、必要なトラックデータが自動で拡張される

---

## 5. Instrument Select モーダルの使い方

- **PREV / NEXT**：プログラム番号を前後
- **FIND**：文字検索または番号入力
    - 例：`Piano`, `Bass`, `81` など

- **OK**：選択確定
- **CANCEL**：閉じる（変更しない）

※ モーダル表示中は通常編集入力（BPM/スクロール等）はロックされます。

---

## 6. 実用ワークフロー例

1. BPMを決める（例: 140）
2. Track 1 をメロディ、Track 2 をベース、Track 3 をコード、Track 4 をドラムに設定
3. まず `Q=1/16, MUL=1` でリズムを打ち込む
4. 次に `MUL=2〜4` で伸ばしノートを作る
5. 再生しながらタイムラインをクリックして各小節を確認
6. 必要なら音色・Velocityでバランス調整

---

## 7. よくある詰まりポイント

- **ノートが入らない**
    - クリック位置がロール範囲外でないか確認
    - 選択トラック/イベントが意図通りか確認

- **同じ場所でノートが消える**
    - 既存ノートを同設定でクリックするとトグルでOFFになる仕様

- **音が小さい/強すぎる**
    - TrackのVelocityを調整

- **編集したい音域が見えない**
    - 右スクロールバー or ↑↓キーで移動
    - Zoomで行高調整

---

## 8. 仕様メモ（編集時の前提）

- 4拍/小節
- 64小節
- 1クリップ = 4拍（1小節）
- 初期トラック数 4（必要に応じて拡張）
- ドラムトラックは専用発音（Drum Kit）

---

必要ならこのまま `README.md` に貼れる形式で、
「導入」「既知の制約」「操作GIFを置く位置」まで含めた完全版に整形して渡せます。

[1]: https://chatgpt.com/c/698d13d4-f94c-83a4-8492-4de074ba23ba "AWS Lambdaで実行"
[2]: https://chatgpt.com/c/698d339b-a8bc-83a8-aba1-c756b53695c6 "コードのバグ検出"
[3]: https://chatgpt.com/c/698c9e99-5fe4-83a5-a893-0b3a222dc261 "合法手がない場合の自動パス"
[4]: https://chatgpt.com/c/698d2ca5-d0e8-83ab-877d-2b5d22140838 "TypeScript 6.0 Beta"
